<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>The Great Escape: Routine at ADBD</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../TheGreatEscape.css" />

</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a class="link" href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a class="link" href="AD59.html">AD59</a></span></td>
<td class="up">Up: <a class="link" href="../maps/all.html#adbd">Map</a></td>
<td class="next"><span class="next-1">Next: <a class="link" href="AE75.html">AE75</a></span></td>
</tr>
</table>
<div class="description">ADBD: Turns white screen elements light blue and tracks the hero with a searchlight.</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="4">
<div class="details">
<div class="paragraph">
Used by the routine at <a class="link" href="9D7B.html">9D7B</a>.
</div>
</div>
<table class="input-0">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>

</table>
<table class="output-0">
<tr class="asm-output-header">
<th colspan="2">Output</th>
</tr>

</table>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="adbd"></a>ADBD</td>
<td class="instruction">LD HL,$81BD</td>
<td class="comment-11" rowspan="1">HL = &amp;searchlight_state;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="adc0"></a>ADC0</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-11" rowspan="3">if (*HL == searchlight_STATE_SEARCHING) goto not_tracking;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="adc1"></a>ADC1</td>
<td class="instruction">CP $FF</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="adc3"></a>ADC3</td>
<td class="instruction">JP Z,$AE0D</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="adc6"></a>ADC6</td>
<td class="instruction">LD A,($68A0)</td>
<td class="comment-11" rowspan="3">if (room_index) &lt;% // hero is indoors</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="adc9"></a>ADC9</td>
<td class="instruction">AND A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="adca"></a>ADCA</td>
<td class="instruction">JR Z,$ADCF</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="adcc"></a>
<div class="comments">
<div class="paragraph">
If the hero goes indoors then the searchlight loses track.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="adcc"></a>ADCC</td>
<td class="instruction">LD (HL),$FF</td>
<td class="comment-11" rowspan="1">*HL = searchlight_STATE_SEARCHING;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="adce"></a>ADCE</td>
<td class="instruction">RET</td>
<td class="comment-11" rowspan="1">return; %&gt;</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="adcf"></a>
<div class="comments">
<div class="paragraph">
The hero is outdoors.
</div>
<div class="paragraph">
If the searchlight previously caught the hero, then track him.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="adcf"></a>ADCF</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-11" rowspan="3">if (*HL == searchlight_STATE_CAUGHT) &lt;%</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="add0"></a>ADD0</td>
<td class="instruction">CP $1F</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="add2"></a>ADD2</td>
<td class="instruction">JP NZ,$AE00</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="add5"></a>ADD5</td>
<td class="instruction">LD HL,($81BB)</td>
<td class="comment-11" rowspan="1">HL = map_position;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="add8"></a>ADD8</td>
<td class="instruction">LD A,L</td>
<td class="comment-11" rowspan="3">E = L + 4;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="add9"></a>ADD9</td>
<td class="instruction">ADD A,$04</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="addb"></a>ADDB</td>
<td class="instruction">LD E,A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="addc"></a>ADDC</td>
<td class="instruction">LD D,H</td>
<td class="comment-11" rowspan="1">D = H;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="addd"></a>ADDD</td>
<td class="instruction">LD HL,($AE76)</td>
<td class="comment-11" rowspan="1">HL = searchlight_coords;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ade0"></a>ADE0</td>
<td class="instruction">LD A,L</td>
<td class="comment-11" rowspan="3">if (L == E) &lt;%</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ade1"></a>ADE1</td>
<td class="instruction">CP E</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ade2"></a>ADE2</td>
<td class="instruction">JR NZ,$ADE9</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ade4"></a>ADE4</td>
<td class="instruction">LD A,H</td>
<td class="comment-11" rowspan="3">if (H == D) return; %&gt; // If the highlight doesn't need to move, quit.</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ade5"></a>ADE5</td>
<td class="instruction">CP D</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ade6"></a>ADE6</td>
<td class="instruction">RET Z</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ade7"></a>ADE7</td>
<td class="instruction">JR $ADF1</td>
<td class="comment-11" rowspan="1">else &lt;%</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="ade9"></a>
<div class="comments">
<div class="paragraph">
Move searchlight left/right to focus on the hero.
</div>
<div class="paragraph">
Bug? Possibly missing L != E test surrounding the block.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="ade9"></a>ADE9</td>
<td class="instruction">JP NC,$ADEF</td>
<td class="comment-11" rowspan="1">if (L &lt; E) &lt;%</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="adec"></a>ADEC</td>
<td class="instruction">INC A</td>
<td class="comment-11" rowspan="1">L++; %&gt;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="aded"></a>ADED</td>
<td class="instruction">JR $ADF0</td>
<td class="comment-11" rowspan="1">else &lt;%</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="adef"></a>ADEF</td>
<td class="instruction">DEC A</td>
<td class="comment-11" rowspan="1">L--; %&gt;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="adf0"></a>ADF0</td>
<td class="instruction">LD L,A</td>
<td class="comment-11" rowspan="1">%&gt;</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="adf1"></a>
<div class="comments">
<div class="paragraph">
Move searchlight up/down to focus on the hero.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="adf1"></a>ADF1</td>
<td class="instruction">LD A,H</td>
<td class="comment-11" rowspan="3">if (H != D) &lt;%</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="adf2"></a>ADF2</td>
<td class="instruction">CP D</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="adf3"></a>ADF3</td>
<td class="instruction">JR Z,$ADFD</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="adf5"></a>ADF5</td>
<td class="instruction">JP NC,$ADFB</td>
<td class="comment-11" rowspan="1">if (H &lt; D) &lt;%</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="adf8"></a>ADF8</td>
<td class="instruction">INC A</td>
<td class="comment-11" rowspan="1">H++; %&gt;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="adf9"></a>ADF9</td>
<td class="instruction">JR $ADFC</td>
<td class="comment-11" rowspan="1">else &lt;%</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="adfb"></a>ADFB</td>
<td class="instruction">DEC A</td>
<td class="comment-11" rowspan="1">H--; %&gt;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="adfc"></a>ADFC</td>
<td class="instruction">LD H,A</td>
<td class="comment-11" rowspan="1">%&gt;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="adfd"></a>ADFD</td>
<td class="instruction">LD ($AE76),HL</td>
<td class="comment-11" rowspan="1">searchlight_coords = HL; %&gt;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="ae00"></a>AE00</td>
<td class="instruction">LD DE,($81BB)</td>
<td class="comment-11" rowspan="1">DE = map_position;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae04"></a>AE04</td>
<td class="instruction">LD HL,$AE77</td>
<td class="comment-11" rowspan="1">HL = $AE77; // &amp;searchlight_coords + 1 byte; // compensating for HL--; jumped into</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae07"></a>AE07</td>
<td class="instruction">LD B,$01</td>
<td class="comment-11" rowspan="1">B = 1; // 1 iteration</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae09"></a>AE09</td>
<td class="instruction">PUSH BC</td>
<td class="comment-11" rowspan="1">PUSH BC</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae0a"></a>AE0A</td>
<td class="instruction">PUSH HL</td>
<td class="comment-11" rowspan="1">PUSH HL</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae0b"></a>AE0B</td>
<td class="instruction">JR $AE3F</td>
<td class="comment-11" rowspan="1">goto $AE3F;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="ae0d"></a>AE0D</td>
<td class="instruction">LD HL,$AD29</td>
<td class="comment-11" rowspan="1">not_tracking: HL = &amp;spotlight_movement_data_maybe[0];</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae10"></a>AE10</td>
<td class="instruction">LD B,$03</td>
<td class="comment-11" rowspan="1">B = 3; // 3 iterations == three searchlights</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="ae12"></a>AE12</td>
<td class="instruction">PUSH BC</td>
<td class="comment-11" rowspan="1">do &lt;% PUSH BC</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae13"></a>AE13</td>
<td class="instruction">PUSH HL</td>
<td class="comment-11" rowspan="1">PUSH HL</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae14"></a>AE14</td>
<td class="instruction">CALL <a class="link" href="AD59.html">$AD59</a></td>
<td class="comment-11" rowspan="1">searchlight_movement();</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae17"></a>AE17</td>
<td class="instruction">POP HL</td>
<td class="comment-11" rowspan="1">POP HL</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae18"></a>AE18</td>
<td class="instruction">PUSH HL</td>
<td class="comment-11" rowspan="1">PUSH HL</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae19"></a>AE19</td>
<td class="instruction">CALL <a class="link" href="AE78.html">$AE78</a></td>
<td class="comment-11" rowspan="1">searchlight_caught();</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae1c"></a>AE1C</td>
<td class="instruction">POP HL</td>
<td class="comment-11" rowspan="1">POP HL</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae1d"></a>AE1D</td>
<td class="instruction">PUSH HL</td>
<td class="comment-11" rowspan="1">PUSH HL</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae1e"></a>AE1E</td>
<td class="instruction">LD DE,($81BB)</td>
<td class="comment-11" rowspan="1">DE = map_position;</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="ae22"></a>
<div class="comments">
<div class="paragraph">
if (E + 23 &lt; x || x + 16 &lt; E) goto next;
</div>
<div class="paragraph">
if (D + 16 &lt; y || y + 16 &lt; D) goto next;
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae22"></a>AE22</td>
<td class="instruction">LD A,E</td>
<td class="comment-11" rowspan="4">if (E + 23 &lt; *HL) goto next;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae23"></a>AE23</td>
<td class="instruction">ADD A,$17</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae25"></a>AE25</td>
<td class="instruction">CP (HL)</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae26"></a>AE26</td>
<td class="instruction">JP C,$AE6C</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae29"></a>AE29</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-11" rowspan="4">if (*HL + 16 &lt; E) goto next;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae2a"></a>AE2A</td>
<td class="instruction">ADD A,$10</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae2c"></a>AE2C</td>
<td class="instruction">CP E</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae2d"></a>AE2D</td>
<td class="instruction">JP C,$AE6C</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae30"></a>AE30</td>
<td class="instruction">INC HL</td>
<td class="comment-11" rowspan="1">HL++;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae31"></a>AE31</td>
<td class="instruction">LD A,D</td>
<td class="comment-11" rowspan="4">if (D + 16 &lt; *HL) goto next;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae32"></a>AE32</td>
<td class="instruction">ADD A,$10</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae34"></a>AE34</td>
<td class="instruction">CP (HL)</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae35"></a>AE35</td>
<td class="instruction">JP C,$AE6C</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae38"></a>AE38</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-11" rowspan="4">if (*HL + 16 &lt; D) goto next;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae39"></a>AE39</td>
<td class="instruction">ADD A,$10</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae3b"></a>AE3B</td>
<td class="instruction">CP D</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae3c"></a>AE3C</td>
<td class="instruction">JP C,$AE6C</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="ae3f"></a>AE3F</td>
<td class="instruction">XOR A</td>
<td class="comment-11" rowspan="1">A = 0;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae40"></a>AE40</td>
<td class="instruction">EX AF,AF'</td>
<td class="comment-11" rowspan="1">-</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae41"></a>AE41</td>
<td class="instruction">DEC HL</td>
<td class="comment-11" rowspan="1">HL--;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae42"></a>AE42</td>
<td class="instruction">LD B,$00</td>
<td class="comment-11" rowspan="1">B = 0x00;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae44"></a>AE44</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-11" rowspan="3">if (*HL - E &lt; 0) &lt;%</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae45"></a>AE45</td>
<td class="instruction">SUB E</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae46"></a>AE46</td>
<td class="instruction">JP NC,$AE4E</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae49"></a>AE49</td>
<td class="instruction">LD B,$FF</td>
<td class="comment-11" rowspan="1">B = 0xFF;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae4b"></a>AE4B</td>
<td class="instruction">EX AF,AF'</td>
<td class="comment-11" rowspan="1">-</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae4c"></a>AE4C</td>
<td class="instruction">CPL</td>
<td class="comment-11" rowspan="1">A = ~A;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae4d"></a>AE4D</td>
<td class="instruction">EX AF,AF'</td>
<td class="comment-11" rowspan="1">- %&gt;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="ae4e"></a>AE4E</td>
<td class="instruction">LD C,A</td>
<td class="comment-11" rowspan="1">C = Adash;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae4f"></a>AE4F</td>
<td class="instruction">INC HL</td>
<td class="comment-11" rowspan="2">Adash = *++HL;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae50"></a>AE50</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae51"></a>AE51</td>
<td class="instruction">LD H,$00</td>
<td class="comment-11" rowspan="1">H = 0x00;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae53"></a>AE53</td>
<td class="instruction">SUB D</td>
<td class="comment-11" rowspan="1">Adash -= D;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae54"></a>AE54</td>
<td class="instruction">JP NC,$AE59</td>
<td class="comment-11" rowspan="2">if (Adash &lt; 0) H = 0xFF; // -ve</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae57"></a>AE57</td>
<td class="instruction">LD H,$FF</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="ae59"></a>AE59</td>
<td class="instruction">LD L,A</td>
<td class="comment-11" rowspan="1">L = Adash;</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="ae5a"></a>
<div class="comments">
<div class="paragraph">
HL must be row, BC must be column
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae5a"></a>AE5A</td>
<td class="instruction">ADD HL,HL</td>
<td class="comment-11" rowspan="5">HL *= 32;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae5b"></a>AE5B</td>
<td class="instruction">ADD HL,HL</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae5c"></a>AE5C</td>
<td class="instruction">ADD HL,HL</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae5d"></a>AE5D</td>
<td class="instruction">ADD HL,HL</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae5e"></a>AE5E</td>
<td class="instruction">ADD HL,HL</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae5f"></a>AE5F</td>
<td class="instruction">ADD HL,BC</td>
<td class="comment-11" rowspan="1">HL += BC;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae60"></a>AE60</td>
<td class="instruction">LD BC,$5846</td>
<td class="comment-11" rowspan="2">HL += 0x5846; // address of top-left game window attribute</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae63"></a>AE63</td>
<td class="instruction">ADD HL,BC</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae64"></a>AE64</td>
<td class="instruction">EX DE,HL</td>
<td class="comment-11" rowspan="1">EX DE,HL</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae65"></a>AE65</td>
<td class="instruction">EX AF,AF'</td>
<td class="comment-11" rowspan="1">-</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae66"></a>AE66</td>
<td class="instruction">LD ($AE75),A</td>
<td class="comment-11" rowspan="1">searchlight_related = A;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae69"></a>AE69</td>
<td class="instruction">CALL <a class="link" href="AEB8.html">$AEB8</a></td>
<td class="comment-11" rowspan="1">searchlight_plot();</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="ae6c"></a>AE6C</td>
<td class="instruction">POP HL</td>
<td class="comment-11" rowspan="1">next: POP HL</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae6d"></a>AE6D</td>
<td class="instruction">POP BC</td>
<td class="comment-11" rowspan="1">POP BC</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae6e"></a>AE6E</td>
<td class="instruction">LD DE,$0007</td>
<td class="comment-11" rowspan="2">HL += 7;</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae71"></a>AE71</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae72"></a>AE72</td>
<td class="instruction">DJNZ $AE12</td>
<td class="comment-11" rowspan="1">%&gt; while (--B);</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="ae74"></a>AE74</td>
<td class="instruction">RET</td>
<td class="comment-11" rowspan="1">return;</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a class="link" href="AD59.html">AD59</a></span></td>
<td class="up">Up: <a class="link" href="../maps/all.html#adbd">Map</a></td>
<td class="next"><span class="next-1">Next: <a class="link" href="AE75.html">AE75</a></span></td>
</tr>
</table>
<div class="footer">
<div class="release">The incomplete The Great Escape disassembly 20150622</div>
<div class="copyright">&copy; Denton Designs. Ocean. David Thomas.</div>
<div class="created">Created using <a class="link" href="http://skoolkit.ca/">SkoolKit</a> 4.4.</div>
</div>
</body>
</html>