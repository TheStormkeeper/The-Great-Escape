<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>The Great Escape: Routine at E420</title>
<link rel="stylesheet" type="text/css" href="../TheGreatEscape.css" />
</head>
<body class="disassembly">
<table class="header">
<tr>
<td class="headerLogo"><a class="link" href="../index.html"><img src="../images/logo.png" alt="The Great Escape" /></a></td>
<td class="headerText">Routines</td>
</tr>
</table>
<table class="prevNext">
<tr>
<td class="prev">Prev: <a class="link" href="58383.html">E40F</a></td>
<td class="up">Up: <a class="link" href="../maps/all.html#58400">Map</a></td>
<td class="next">Next: <a class="link" href="58690.html">E542</a></td>
</tr>
</table>
<div class="description">E420: sub_E420</div>
<table class="disassembly">
<tr>
<td class="routineComment" colspan="3">
<div class="details">
<div class="paragraph">
Used by the routine at <a class="link" href="47206.html">B866</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="label"><a name="58400"></a>E420</td>
<td class="instruction">LD A,$0F</td>
<td class="comment" rowspan="3">HL += 15;</td>
</tr>
<tr>
<td class="address"><a name="58402"></a>E422</td>
<td class="instruction">ADD A,L</td>
</tr>
<tr>
<td class="address"><a name="58403"></a>E423</td>
<td class="instruction">LD L,A</td>
</tr>
<tr>
<td class="address"><a name="58404"></a>E424</td>
<td class="instruction">LD DE,$81B2</td>
<td class="comment">DE = &amp;byte_81B2;</td>
</tr>
<tr>
<td class="address"><a name="58407"></a>E427</td>
<td class="instruction">LD A,($68A0)</td>
<td class="comment">A = indoor_room_index;</td>
</tr>
<tr>
<td class="address"><a name="58410"></a>E42A</td>
<td class="instruction">AND A</td>
<td class="comment" rowspan="2">if (A == 0) goto outdoors;</td>
</tr>
<tr>
<td class="address"><a name="58411"></a>E42B</td>
<td class="instruction">JR Z,$E438</td>
</tr>
<tr>
<td class="address"><a name="58413"></a>E42D</td>
<td class="instruction">LDI</td>
<td class="comment">*DE++ = *HL++;</td>
</tr>
<tr>
<td class="address"><a name="58415"></a>E42F</td>
<td class="instruction">INC L</td>
<td class="comment">HL++;</td>
</tr>
<tr>
<td class="address"><a name="58416"></a>E430</td>
<td class="instruction">LDI</td>
<td class="comment">*DE++ = *HL++;</td>
</tr>
<tr>
<td class="address"><a name="58418"></a>E432</td>
<td class="instruction">INC L</td>
<td class="comment">HL++;</td>
</tr>
<tr>
<td class="address"><a name="58419"></a>E433</td>
<td class="instruction">LDI</td>
<td class="comment">*DE++ = *HL++;</td>
</tr>
<tr>
<td class="address"><a name="58421"></a>E435</td>
<td class="instruction">INC L</td>
<td class="comment">HL++;</td>
</tr>
<tr>
<td class="address"><a name="58422"></a>E436</td>
<td class="instruction">JR $E44E</td>
<td class="comment">goto $E44E;</td>
</tr>
<tr>
<td class="label"><a name="58424"></a>E438</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment" rowspan="2">outdoors: A = *HL++;</td>
</tr>
<tr>
<td class="address"><a name="58425"></a>E439</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="address"><a name="58426"></a>E43A</td>
<td class="instruction">LD C,(HL)</td>
<td class="comment">C = *HL;</td>
</tr>
<tr>
<td class="address"><a name="58427"></a>E43B</td>
<td class="instruction">CALL <a class="link" href="58704.html">$E550</a></td>
<td class="comment">divide_AC_by_8_with_rounding();</td>
</tr>
<tr>
<td class="address"><a name="58430"></a>E43E</td>
<td class="instruction">LD (DE),A</td>
<td class="comment">*DE++ = A;</td>
</tr>
<tr>
<td class="address"><a name="58431"></a>E43F</td>
<td class="instruction">INC L</td>
<td class="comment" rowspan="2">HL++;</td>
</tr>
<tr>
<td class="address"><a name="58432"></a>E440</td>
<td class="instruction">INC DE</td>
</tr>
<tr>
<td class="address"><a name="58433"></a>E441</td>
<td class="instruction">LD B,$02</td>
<td class="comment">B = 2; // 2 iterations</td>
</tr>
<tr>
<td class="label"><a name="58435"></a>E443</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment" rowspan="8">do { A = *HL++; } C = *HL; divide_AC_by_8(); *DE++ = A; {HL++; } while (--B);</td>
</tr>
<tr>
<td class="address"><a name="58436"></a>E444</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="address"><a name="58437"></a>E445</td>
<td class="instruction">LD C,(HL)</td>
</tr>
<tr>
<td class="address"><a name="58438"></a>E446</td>
<td class="instruction">CALL <a class="link" href="58709.html">$E555</a></td>
</tr>
<tr>
<td class="address"><a name="58441"></a>E449</td>
<td class="instruction">LD (DE),A</td>
</tr>
<tr>
<td class="address"><a name="58442"></a>E44A</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="address"><a name="58443"></a>E44B</td>
<td class="instruction">INC DE</td>
</tr>
<tr>
<td class="address"><a name="58444"></a>E44C</td>
<td class="instruction">DJNZ $E443</td>
</tr>
<tr>
<td class="label"><a name="58446"></a>E44E</td>
<td class="instruction">LD C,(HL)</td>
<td class="comment" rowspan="2">C = *HL++;</td>
</tr>
<tr>
<td class="address"><a name="58447"></a>E44F</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="address"><a name="58448"></a>E450</td>
<td class="instruction">LD B,(HL)</td>
<td class="comment">B = *HL++;</td>
</tr>
<tr>
<td class="address"><a name="58449"></a>E451</td>
<td class="instruction">PUSH BC</td>
<td class="comment" rowspan="2">PUSH BC</td>
</tr>
<tr>
<td class="address"><a name="58450"></a>E452</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="address"><a name="58451"></a>E453</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment">A = *HL++;</td>
</tr>
<tr>
<td class="address"><a name="58452"></a>E454</td>
<td class="instruction">LD ($81B7),A</td>
<td class="comment">byte_81B7 = A;</td>
</tr>
<tr>
<td class="address"><a name="58455"></a>E457</td>
<td class="instruction">EX AF,AF'</td>
<td class="comment" rowspan="2">EX AF,AF'</td>
</tr>
<tr>
<td class="address"><a name="58456"></a>E458</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="address"><a name="58457"></a>E459</td>
<td class="instruction">LD B,$02</td>
<td class="comment">B = 2; // 2 iterations</td>
</tr>
<tr>
<td class="label"><a name="58459"></a>E45B</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment" rowspan="8">do { A = *HL++; } C = *HL++; divide_AC_by_8(); {*DE++ = A; } while (--B);</td>
</tr>
<tr>
<td class="address"><a name="58460"></a>E45C</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="address"><a name="58461"></a>E45D</td>
<td class="instruction">LD C,(HL)</td>
</tr>
<tr>
<td class="address"><a name="58462"></a>E45E</td>
<td class="instruction">CALL <a class="link" href="58709.html">$E555</a></td>
</tr>
<tr>
<td class="address"><a name="58465"></a>E461</td>
<td class="instruction">LD (DE),A</td>
</tr>
<tr>
<td class="address"><a name="58466"></a>E462</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="address"><a name="58467"></a>E463</td>
<td class="instruction">INC DE</td>
</tr>
<tr>
<td class="address"><a name="58468"></a>E464</td>
<td class="instruction">DJNZ $E45B</td>
</tr>
<tr>
<td class="address"><a name="58470"></a>E466</td>
<td class="instruction">EX AF,AF'</td>
<td class="comment">EX AF,AF'</td>
</tr>
<tr>
<td class="address"><a name="58471"></a>E467</td>
<td class="instruction">POP DE</td>
<td class="comment">POP DE</td>
</tr>
<tr>
<td class="address"><a name="58472"></a>E468</td>
<td class="instruction">ADD A,A</td>
<td class="comment" rowspan="8">DE += A * 6;</td>
</tr>
<tr>
<td class="address"><a name="58473"></a>E469</td>
<td class="instruction">LD C,A</td>
</tr>
<tr>
<td class="address"><a name="58474"></a>E46A</td>
<td class="instruction">ADD A,A</td>
</tr>
<tr>
<td class="address"><a name="58475"></a>E46B</td>
<td class="instruction">ADD A,C</td>
</tr>
<tr>
<td class="address"><a name="58476"></a>E46C</td>
<td class="instruction">ADD A,E</td>
</tr>
<tr>
<td class="address"><a name="58477"></a>E46D</td>
<td class="instruction">LD E,A</td>
</tr>
<tr>
<td class="address"><a name="58478"></a>E46E</td>
<td class="instruction">JR NC,$E471</td>
</tr>
<tr>
<td class="address"><a name="58480"></a>E470</td>
<td class="instruction">INC D</td>
</tr>
<tr>
<td class="label"><a name="58481"></a>E471</td>
<td class="instruction">INC L</td>
<td class="comment" rowspan="2">L += 2;</td>
</tr>
<tr>
<td class="address"><a name="58482"></a>E472</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="address"><a name="58483"></a>E473</td>
<td class="instruction">EX DE,HL</td>
<td class="comment">EX DE,HL</td>
</tr>
<tr>
<td class="address"><a name="58484"></a>E474</td>
<td class="instruction">LDI</td>
<td class="comment">*DE++ = *HL++;</td>
</tr>
<tr>
<td class="address"><a name="58486"></a>E476</td>
<td class="instruction">LDI</td>
<td class="comment">*DE++ = *HL++;</td>
</tr>
<tr>
<td class="address"><a name="58488"></a>E478</td>
<td class="instruction">LD DE,$81AC</td>
<td class="comment" rowspan="3">memcpy(word_81AC, HL, 4);</td>
</tr>
<tr>
<td class="address"><a name="58491"></a>E47B</td>
<td class="instruction">LD BC,$0004</td>
</tr>
<tr>
<td class="address"><a name="58494"></a>E47E</td>
<td class="instruction">LDIR</td>
</tr>
<tr>
<td class="address"><a name="58496"></a>E480</td>
<td class="instruction">CALL <a class="link" href="47863.html">$BAF7</a></td>
<td class="comment">sub_BAF7();</td>
</tr>
<tr>
<td class="address"><a name="58499"></a>E483</td>
<td class="instruction">AND A</td>
<td class="comment" rowspan="2">if (A) return;</td>
</tr>
<tr>
<td class="address"><a name="58500"></a>E484</td>
<td class="instruction">RET NZ</td>
</tr>
<tr>
<td class="address"><a name="58501"></a>E485</td>
<td class="instruction">PUSH BC</td>
<td class="comment">PUSH BC</td>
</tr>
<tr>
<td class="address"><a name="58502"></a>E486</td>
<td class="instruction">PUSH DE</td>
<td class="comment">PUSH DE</td>
</tr>
<tr>
<td class="address"><a name="58503"></a>E487</td>
<td class="instruction">LD A,(IY+$1E)</td>
<td class="comment">A = IY[30];</td>
</tr>
<tr>
<td class="address"><a name="58506"></a>E48A</td>
<td class="instruction">CP $03</td>
<td class="comment" rowspan="13">if (A - 3 == 0) } {($E2C2) = E; // self-modify } ($E363) = E; // self-modify A = 3; HL = pairs_of_offsets; } else { A = E; ($E121) = A; // self-modify ($E1E2) = A; // self-modify A = 4; HL = pairs_of_offsets2;</td>
</tr>
<tr>
<td class="address"><a name="58508"></a>E48C</td>
<td class="instruction">JR NZ,$E49C</td>
</tr>
<tr>
<td class="address"><a name="58510"></a>E48E</td>
<td class="instruction">LD A,E</td>
</tr>
<tr>
<td class="address"><a name="58511"></a>E48F</td>
<td class="instruction">LD ($E2C2),A</td>
</tr>
<tr>
<td class="address"><a name="58514"></a>E492</td>
<td class="instruction">LD ($E363),A</td>
</tr>
<tr>
<td class="address"><a name="58517"></a>E495</td>
<td class="instruction">LD A,$03</td>
</tr>
<tr>
<td class="address"><a name="58519"></a>E497</td>
<td class="instruction">LD HL,$E0E0</td>
</tr>
<tr>
<td class="address"><a name="58522"></a>E49A</td>
<td class="instruction">JR $E4A8</td>
</tr>
<tr>
<td class="label"><a name="58524"></a>E49C</td>
<td class="instruction">LD A,E</td>
</tr>
<tr>
<td class="address"><a name="58525"></a>E49D</td>
<td class="instruction">LD ($E121),A</td>
</tr>
<tr>
<td class="address"><a name="58528"></a>E4A0</td>
<td class="instruction">LD ($E1E2),A</td>
</tr>
<tr>
<td class="address"><a name="58531"></a>E4A3</td>
<td class="instruction">LD A,$04</td>
</tr>
<tr>
<td class="address"><a name="58533"></a>E4A5</td>
<td class="instruction">LD HL,$E0EC</td>
</tr>
<tr>
<td class="label"><a name="58536"></a>E4A8</td>
<td class="instruction">PUSH HL</td>
<td class="comment">PUSH HL</td>
</tr>
<tr>
<td class="address"><a name="58537"></a>E4A9</td>
<td class="instruction">LD ($E4C0),A</td>
<td class="comment">($E4C0) = A; // self-modify</td>
</tr>
<tr>
<td class="address"><a name="58540"></a>E4AC</td>
<td class="instruction">LD E,A</td>
<td class="comment">E = A;</td>
</tr>
<tr>
<td class="address"><a name="58541"></a>E4AD</td>
<td class="instruction">LD A,B</td>
<td class="comment">A = B;</td>
</tr>
<tr>
<td class="address"><a name="58542"></a>E4AE</td>
<td class="instruction">AND A</td>
<td class="comment" rowspan="10">if (A == 0) } A = 0x77; EX AF,AF' A = C; } else { A = 0; EX AF,AF' A = E; SUB C</td>
</tr>
<tr>
<td class="address"><a name="58543"></a>E4AF</td>
<td class="instruction">JR NZ,$E4B7</td>
</tr>
<tr>
<td class="address"><a name="58545"></a>E4B1</td>
<td class="instruction">LD A,$77</td>
</tr>
<tr>
<td class="address"><a name="58547"></a>E4B3</td>
<td class="instruction">EX AF,AF'</td>
</tr>
<tr>
<td class="address"><a name="58548"></a>E4B4</td>
<td class="instruction">LD A,C</td>
</tr>
<tr>
<td class="address"><a name="58549"></a>E4B5</td>
<td class="instruction">JR $E4BB</td>
</tr>
<tr>
<td class="label"><a name="58551"></a>E4B7</td>
<td class="instruction">XOR A</td>
</tr>
<tr>
<td class="address"><a name="58552"></a>E4B8</td>
<td class="instruction">EX AF,AF'</td>
</tr>
<tr>
<td class="address"><a name="58553"></a>E4B9</td>
<td class="instruction">LD A,E</td>
</tr>
<tr>
<td class="address"><a name="58554"></a>E4BA</td>
<td class="instruction">SUB C</td>
</tr>
<tr>
<td class="label"><a name="58555"></a>E4BB</td>
<td class="instruction">EXX</td>
<td class="comment">EXX</td>
</tr>
<tr>
<td class="address"><a name="58556"></a>E4BC</td>
<td class="instruction">POP HL</td>
<td class="comment">POP HL</td>
</tr>
<tr>
<td class="address"><a name="58557"></a>E4BD</td>
<td class="instruction">LD C,A</td>
<td class="comment">C = A;</td>
</tr>
<tr>
<td class="address"><a name="58558"></a>E4BE</td>
<td class="instruction">EX AF,AF'</td>
<td class="comment">EX AF,AF'</td>
</tr>
<tr>
<td class="address"><a name="58559"></a>E4BF</td>
<td class="instruction">LD B,$03</td>
<td class="comment">B = 3; // 3 iterations // self modified by $E4A9</td>
</tr>
<tr>
<td class="label"><a name="58561"></a>E4C1</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment" rowspan="14">do { E = *HL++; } D = *HL++; {*DE = A; } {E = *HL++; } {D = *HL++; } *DE = A; C--; {if (Z) A ^= 0x77; } while (--B);</td>
</tr>
<tr>
<td class="address"><a name="58562"></a>E4C2</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="address"><a name="58563"></a>E4C3</td>
<td class="instruction">LD D,(HL)</td>
</tr>
<tr>
<td class="address"><a name="58564"></a>E4C4</td>
<td class="instruction">LD (DE),A</td>
</tr>
<tr>
<td class="address"><a name="58565"></a>E4C5</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="address"><a name="58566"></a>E4C6</td>
<td class="instruction">LD E,(HL)</td>
</tr>
<tr>
<td class="address"><a name="58567"></a>E4C7</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="address"><a name="58568"></a>E4C8</td>
<td class="instruction">LD D,(HL)</td>
</tr>
<tr>
<td class="address"><a name="58569"></a>E4C9</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="address"><a name="58570"></a>E4CA</td>
<td class="instruction">LD (DE),A</td>
</tr>
<tr>
<td class="address"><a name="58571"></a>E4CB</td>
<td class="instruction">DEC C</td>
</tr>
<tr>
<td class="address"><a name="58572"></a>E4CC</td>
<td class="instruction">JR NZ,$E4D0</td>
</tr>
<tr>
<td class="address"><a name="58574"></a>E4CE</td>
<td class="instruction">XOR $77</td>
</tr>
<tr>
<td class="label"><a name="58576"></a>E4D0</td>
<td class="instruction">DJNZ $E4C1</td>
</tr>
<tr>
<td class="address"><a name="58578"></a>E4D2</td>
<td class="instruction">EXX</td>
<td class="comment">EXX</td>
</tr>
<tr>
<td class="address"><a name="58579"></a>E4D3</td>
<td class="instruction">LD A,D</td>
<td class="comment">A = D;</td>
</tr>
<tr>
<td class="address"><a name="58580"></a>E4D4</td>
<td class="instruction">AND A</td>
<td class="comment">A &amp;= A;</td>
</tr>
<tr>
<td class="address"><a name="58581"></a>E4D5</td>
<td class="instruction">LD DE,$0000</td>
<td class="comment">DE = 0;</td>
</tr>
<tr>
<td class="address"><a name="58584"></a>E4D8</td>
<td class="instruction">JR NZ,$E4F5</td>
<td class="comment">if (Z) {</td>
</tr>
<tr>
<td class="address"><a name="58586"></a>E4DA</td>
<td class="instruction">LD A,($81BC)</td>
<td class="comment" rowspan="6">HL = $81BC * 8;</td>
</tr>
<tr>
<td class="address"><a name="58589"></a>E4DD</td>
<td class="instruction">LD L,A</td>
</tr>
<tr>
<td class="address"><a name="58590"></a>E4DE</td>
<td class="instruction">LD H,$00</td>
</tr>
<tr>
<td class="address"><a name="58592"></a>E4E0</td>
<td class="instruction">ADD HL,HL</td>
</tr>
<tr>
<td class="address"><a name="58593"></a>E4E1</td>
<td class="instruction">ADD HL,HL</td>
</tr>
<tr>
<td class="address"><a name="58594"></a>E4E2</td>
<td class="instruction">ADD HL,HL</td>
</tr>
<tr>
<td class="address"><a name="58595"></a>E4E3</td>
<td class="instruction">EX DE,HL</td>
<td class="comment">EX DE,HL</td>
</tr>
<tr>
<td class="address"><a name="58596"></a>E4E4</td>
<td class="instruction">LD L,(IY+$1A)</td>
<td class="comment">L = IY[26];</td>
</tr>
<tr>
<td class="address"><a name="58599"></a>E4E7</td>
<td class="instruction">LD H,(IY+$1B)</td>
<td class="comment">H = IY[27];</td>
</tr>
<tr>
<td class="address"><a name="58602"></a>E4EA</td>
<td class="instruction">AND A</td>
<td class="comment">A &amp;= A;</td>
</tr>
<tr>
<td class="address"><a name="58603"></a>E4EB</td>
<td class="instruction">SBC HL,DE</td>
<td class="comment">SBC HL,DE</td>
</tr>
<tr>
<td class="address"><a name="58605"></a>E4ED</td>
<td class="instruction">ADD HL,HL</td>
<td class="comment" rowspan="7">HL *= 24;</td>
</tr>
<tr>
<td class="address"><a name="58606"></a>E4EE</td>
<td class="instruction">ADD HL,HL</td>
</tr>
<tr>
<td class="address"><a name="58607"></a>E4EF</td>
<td class="instruction">ADD HL,HL</td>
</tr>
<tr>
<td class="address"><a name="58608"></a>E4F0</td>
<td class="instruction">LD E,L</td>
</tr>
<tr>
<td class="address"><a name="58609"></a>E4F1</td>
<td class="instruction">LD D,H</td>
</tr>
<tr>
<td class="address"><a name="58610"></a>E4F2</td>
<td class="instruction">ADD HL,HL</td>
</tr>
<tr>
<td class="address"><a name="58611"></a>E4F3</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="address"><a name="58612"></a>E4F4</td>
<td class="instruction">EX DE,HL</td>
<td class="comment">EX DE,HL }</td>
</tr>
<tr>
<td class="label"><a name="58613"></a>E4F5</td>
<td class="instruction">LD A,($81B5)</td>
<td class="comment">A = map_position_related_1;</td>
</tr>
<tr>
<td class="address"><a name="58616"></a>E4F8</td>
<td class="instruction">LD HL,$81BB</td>
<td class="comment">HL = &amp;map_position_maybe;</td>
</tr>
<tr>
<td class="address"><a name="58619"></a>E4FB</td>
<td class="instruction">SUB (HL)</td>
<td class="comment">A -= *HL;</td>
</tr>
<tr>
<td class="address"><a name="58620"></a>E4FC</td>
<td class="instruction">LD L,A</td>
<td class="comment" rowspan="2">HL = A;</td>
</tr>
<tr>
<td class="address"><a name="58621"></a>E4FD</td>
<td class="instruction">LD H,$00</td>
</tr>
<tr>
<td class="address"><a name="58623"></a>E4FF</td>
<td class="instruction">JR NC,$E503</td>
<td class="comment">JR NC,$E503</td>
</tr>
<tr>
<td class="address"><a name="58625"></a>E501</td>
<td class="instruction">LD H,$FF</td>
<td class="comment">H = 0xFF;</td>
</tr>
<tr>
<td class="label"><a name="58627"></a>E503</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment" rowspan="3">HL += DE + 0xF290;</td>
</tr>
<tr>
<td class="address"><a name="58628"></a>E504</td>
<td class="instruction">LD DE,$F290</td>
</tr>
<tr>
<td class="address"><a name="58631"></a>E507</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="address"><a name="58632"></a>E508</td>
<td class="instruction">LD ($81A2),HL</td>
<td class="comment">($81A2) = HL;</td>
</tr>
<tr>
<td class="address"><a name="58635"></a>E50B</td>
<td class="instruction">LD HL,$8100</td>
<td class="comment">HL = 0x8100;</td>
</tr>
<tr>
<td class="address"><a name="58638"></a>E50E</td>
<td class="instruction">POP DE</td>
<td class="comment">POP DE</td>
</tr>
<tr>
<td class="address"><a name="58639"></a>E50F</td>
<td class="instruction">PUSH DE</td>
<td class="comment">PUSH DE</td>
</tr>
<tr>
<td class="address"><a name="58640"></a>E510</td>
<td class="instruction">LD A,D</td>
<td class="comment" rowspan="11">L += D * 4 + (IY[26] &amp; 7) * 4;</td>
</tr>
<tr>
<td class="address"><a name="58641"></a>E511</td>
<td class="instruction">ADD A,A</td>
</tr>
<tr>
<td class="address"><a name="58642"></a>E512</td>
<td class="instruction">ADD A,A</td>
</tr>
<tr>
<td class="address"><a name="58643"></a>E513</td>
<td class="instruction">ADD A,L</td>
</tr>
<tr>
<td class="address"><a name="58644"></a>E514</td>
<td class="instruction">LD L,A</td>
</tr>
<tr>
<td class="address"><a name="58645"></a>E515</td>
<td class="instruction">LD A,(IY+$1A)</td>
</tr>
<tr>
<td class="address"><a name="58648"></a>E518</td>
<td class="instruction">AND $07</td>
</tr>
<tr>
<td class="address"><a name="58650"></a>E51A</td>
<td class="instruction">ADD A,A</td>
</tr>
<tr>
<td class="address"><a name="58651"></a>E51B</td>
<td class="instruction">ADD A,A</td>
</tr>
<tr>
<td class="address"><a name="58652"></a>E51C</td>
<td class="instruction">ADD A,L</td>
</tr>
<tr>
<td class="address"><a name="58653"></a>E51D</td>
<td class="instruction">LD L,A</td>
</tr>
<tr>
<td class="address"><a name="58654"></a>E51E</td>
<td class="instruction">LD ($81B0),HL</td>
<td class="comment">word_81B0 = HL;</td>
</tr>
<tr>
<td class="address"><a name="58657"></a>E521</td>
<td class="instruction">POP DE</td>
<td class="comment">POP DE</td>
</tr>
<tr>
<td class="address"><a name="58658"></a>E522</td>
<td class="instruction">LD A,D</td>
<td class="comment">A = D;</td>
</tr>
<tr>
<td class="address"><a name="58659"></a>E523</td>
<td class="instruction">AND A</td>
<td class="comment" rowspan="9">if (A) } D = A; A = 0; {E = IY[30] - 1; } {do { A += E; } while (--D); }</td>
</tr>
<tr>
<td class="address"><a name="58660"></a>E524</td>
<td class="instruction">JR Z,$E531</td>
</tr>
<tr>
<td class="address"><a name="58662"></a>E526</td>
<td class="instruction">LD D,A</td>
</tr>
<tr>
<td class="address"><a name="58663"></a>E527</td>
<td class="instruction">XOR A</td>
</tr>
<tr>
<td class="address"><a name="58664"></a>E528</td>
<td class="instruction">LD E,(IY+$1E)</td>
</tr>
<tr>
<td class="address"><a name="58667"></a>E52B</td>
<td class="instruction">DEC E</td>
</tr>
<tr>
<td class="label"><a name="58668"></a>E52C</td>
<td class="instruction">ADD A,E</td>
</tr>
<tr>
<td class="address"><a name="58669"></a>E52D</td>
<td class="instruction">DEC D</td>
</tr>
<tr>
<td class="address"><a name="58670"></a>E52E</td>
<td class="instruction">JP NZ,$E52C</td>
</tr>
<tr>
<td class="label"><a name="58673"></a>E531</td>
<td class="instruction">LD E,A</td>
<td class="comment">E = A;</td>
</tr>
<tr>
<td class="address"><a name="58674"></a>E532</td>
<td class="instruction">LD HL,($81AC)</td>
<td class="comment" rowspan="3">word_81AC += DE;</td>
</tr>
<tr>
<td class="address"><a name="58677"></a>E535</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="address"><a name="58678"></a>E536</td>
<td class="instruction">LD ($81AC),HL</td>
</tr>
<tr>
<td class="address"><a name="58681"></a>E539</td>
<td class="instruction">LD HL,($81AE)</td>
<td class="comment" rowspan="3">word_81AE += DE;</td>
</tr>
<tr>
<td class="address"><a name="58684"></a>E53C</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="address"><a name="58685"></a>E53D</td>
<td class="instruction">LD ($81AE),HL</td>
</tr>
<tr>
<td class="address"><a name="58688"></a>E540</td>
<td class="instruction">POP BC</td>
<td class="comment">POP BC</td>
</tr>
<tr>
<td class="address"><a name="58689"></a>E541</td>
<td class="instruction">RET</td>
<td class="comment">return;</td>
</tr>
</table>
<table class="prevNext">
<tr>
<td class="prev">Prev: <a class="link" href="58383.html">E40F</a></td>
<td class="up">Up: <a class="link" href="../maps/all.html#58400">Map</a></td>
<td class="next">Next: <a class="link" href="58690.html">E542</a></td>
</tr>
</table>
<div class="footer">
<div class="release">The incomplete The Great Escape disassembly 20130101</div>
<div class="copyright">&copy; Denton Designs. Ocean. David Thomas.</div>
<div class="created">Created using <a class="link" href="http://pyskool.ca/?page_id=177">SkoolKit</a> 3.3.</div>
</div>
</body>
</html>