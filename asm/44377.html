<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>The Great Escape: Routine at AD59</title>
<link rel="stylesheet" type="text/css" href="../TheGreatEscape.css" />
</head>
<body class="disassembly">
<table class="header">
<tr>
<td class="headerLogo"><a class="link" href="../index.html"><img src="../images/logo.png" alt="The Great Escape" /></a></td>
<td class="headerText">Routines</td>
</tr>
</table>
<table class="prevNext">
<tr>
<td class="prev">Prev: <a class="link" href="44329.html">AD29</a></td>
<td class="up">Up: <a class="link" href="../maps/all.html#44377">Map</a></td>
<td class="next">Next: <a class="link" href="44477.html">ADBD</a></td>
</tr>
</table>
<div class="description">AD59: sub_AD59</div>
<table class="disassembly">
<tr>
<td class="routineComment" colspan="3">
<div class="details">
<div class="paragraph">
Used by nighttime.
</div>
</div>
</td>
</tr>
<tr>
<td class="label"><a name="44377"></a>AD59</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment" rowspan="2">E = *HL++;</td>
</tr>
<tr>
<td class="address"><a name="44378"></a>AD5A</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="address"><a name="44379"></a>AD5B</td>
<td class="instruction">LD D,(HL)</td>
<td class="comment" rowspan="2">D = *HL++;</td>
</tr>
<tr>
<td class="address"><a name="44380"></a>AD5C</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="address"><a name="44381"></a>AD5D</td>
<td class="instruction">DEC (HL)</td>
<td class="comment">*HL--;</td>
</tr>
<tr>
<td class="address"><a name="44382"></a>AD5E</td>
<td class="instruction">JP NZ,$AD99</td>
<td class="comment">JP NZ,$AD99</td>
</tr>
<tr>
<td class="address"><a name="44385"></a>AD61</td>
<td class="instruction">INC HL</td>
<td class="comment" rowspan="2">HL += 2;</td>
</tr>
<tr>
<td class="address"><a name="44386"></a>AD62</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="address"><a name="44387"></a>AD63</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment">A = *HL;</td>
</tr>
<tr>
<td class="address"><a name="44388"></a>AD64</td>
<td class="instruction">BIT 7,A</td>
<td class="comment">BIT 7,A</td>
</tr>
<tr>
<td class="address"><a name="44390"></a>AD66</td>
<td class="instruction">JP Z,$AD76</td>
<td class="comment">JP Z,$AD76</td>
</tr>
<tr>
<td class="address"><a name="44393"></a>AD69</td>
<td class="instruction">AND $7F</td>
<td class="comment">A &amp;= 0x7F;</td>
</tr>
<tr>
<td class="address"><a name="44395"></a>AD6B</td>
<td class="instruction">JP NZ,$AD72</td>
<td class="comment">JP NZ,$AD72</td>
</tr>
<tr>
<td class="address"><a name="44398"></a>AD6E</td>
<td class="instruction">RES 7,(HL)</td>
<td class="comment">RES 7,*HL</td>
</tr>
<tr>
<td class="address"><a name="44400"></a>AD70</td>
<td class="instruction">JR $AD74</td>
<td class="comment">goto $AD74 // JR-to-JR: Why not just jump direct?;</td>
</tr>
<tr>
<td class="label"><a name="44402"></a>AD72</td>
<td class="instruction">DEC (HL)</td>
<td class="comment">(*HL)--;</td>
</tr>
<tr>
<td class="address"><a name="44403"></a>AD73</td>
<td class="instruction">DEC A</td>
<td class="comment">A--;</td>
</tr>
<tr>
<td class="label"><a name="44404"></a>AD74</td>
<td class="instruction">JR $AD78</td>
<td class="comment">goto $AD78;</td>
</tr>
<tr>
<td class="label"><a name="44406"></a>AD76</td>
<td class="instruction">INC A</td>
<td class="comment">A++;</td>
</tr>
<tr>
<td class="address"><a name="44407"></a>AD77</td>
<td class="instruction">LD (HL),A</td>
<td class="comment">*HL = A;</td>
</tr>
<tr>
<td class="label"><a name="44408"></a>AD78</td>
<td class="instruction">INC HL</td>
<td class="comment">HL++;</td>
</tr>
<tr>
<td class="address"><a name="44409"></a>AD79</td>
<td class="instruction">LD C,(HL)</td>
<td class="comment" rowspan="2">C = *HL++;</td>
</tr>
<tr>
<td class="address"><a name="44410"></a>AD7A</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="address"><a name="44411"></a>AD7B</td>
<td class="instruction">LD B,(HL)</td>
<td class="comment">B = *HL;</td>
</tr>
<tr>
<td class="address"><a name="44412"></a>AD7C</td>
<td class="instruction">DEC HL</td>
<td class="comment" rowspan="2">HL -= 2;</td>
</tr>
<tr>
<td class="address"><a name="44413"></a>AD7D</td>
<td class="instruction">DEC HL</td>
</tr>
<tr>
<td class="address"><a name="44414"></a>AD7E</td>
<td class="instruction">ADD A,A</td>
<td class="comment" rowspan="5">BC += A * 2;</td>
</tr>
<tr>
<td class="address"><a name="44415"></a>AD7F</td>
<td class="instruction">ADD A,C</td>
</tr>
<tr>
<td class="address"><a name="44416"></a>AD80</td>
<td class="instruction">LD C,A</td>
</tr>
<tr>
<td class="address"><a name="44417"></a>AD81</td>
<td class="instruction">JR NC,$AD84</td>
</tr>
<tr>
<td class="address"><a name="44419"></a>AD83</td>
<td class="instruction">INC B</td>
</tr>
<tr>
<td class="label"><a name="44420"></a>AD84</td>
<td class="instruction">LD A,(BC)</td>
<td class="comment">A = *BC;</td>
</tr>
<tr>
<td class="address"><a name="44421"></a>AD85</td>
<td class="instruction">CP $FF</td>
<td class="comment" rowspan="2">if (A != 0xFF) goto ad90</td>
</tr>
<tr>
<td class="address"><a name="44423"></a>AD87</td>
<td class="instruction">JP NZ,$AD90</td>
</tr>
<tr>
<td class="address"><a name="44426"></a>AD8A</td>
<td class="instruction">DEC (HL)</td>
<td class="comment">(*HL)--;</td>
</tr>
<tr>
<td class="address"><a name="44427"></a>AD8B</td>
<td class="instruction">SET 7,(HL)</td>
<td class="comment">*HL |= 1&lt;&lt;7;</td>
</tr>
<tr>
<td class="address"><a name="44429"></a>AD8D</td>
<td class="instruction">DEC BC</td>
<td class="comment" rowspan="2">BC -= 2;</td>
</tr>
<tr>
<td class="address"><a name="44430"></a>AD8E</td>
<td class="instruction">DEC BC</td>
</tr>
<tr>
<td class="address"><a name="44431"></a>AD8F</td>
<td class="instruction">LD A,(BC)</td>
<td class="comment">A = *BC;</td>
</tr>
<tr>
<td class="label"><a name="44432"></a>AD90</td>
<td class="instruction">DEC HL</td>
<td class="comment" rowspan="2">HL -= 2;</td>
</tr>
<tr>
<td class="address"><a name="44433"></a>AD91</td>
<td class="instruction">DEC HL</td>
</tr>
<tr>
<td class="address"><a name="44434"></a>AD92</td>
<td class="instruction">LD A,(BC)</td>
<td class="comment" rowspan="4">*HL++ = *BC++;</td>
</tr>
<tr>
<td class="address"><a name="44435"></a>AD93</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="address"><a name="44436"></a>AD94</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="address"><a name="44437"></a>AD95</td>
<td class="instruction">INC BC</td>
</tr>
<tr>
<td class="address"><a name="44438"></a>AD96</td>
<td class="instruction">LD A,(BC)</td>
<td class="comment" rowspan="2">*HL = *BC;</td>
</tr>
<tr>
<td class="address"><a name="44439"></a>AD97</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="address"><a name="44440"></a>AD98</td>
<td class="instruction">RET</td>
<td class="comment">return;</td>
</tr>
<tr>
<td class="label"><a name="44441"></a>AD99</td>
<td class="instruction">INC HL</td>
<td class="comment">HL++;</td>
</tr>
<tr>
<td class="address"><a name="44442"></a>AD9A</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment" rowspan="2">A = *HL++;</td>
</tr>
<tr>
<td class="address"><a name="44443"></a>AD9B</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="address"><a name="44444"></a>AD9C</td>
<td class="instruction">BIT 7,(HL)</td>
<td class="comment">BIT 7,*HL</td>
</tr>
<tr>
<td class="address"><a name="44446"></a>AD9E</td>
<td class="instruction">JR Z,$ADA2</td>
<td class="comment">JR Z,$ADA2</td>
</tr>
<tr>
<td class="address"><a name="44448"></a>ADA0</td>
<td class="instruction">XOR $02</td>
<td class="comment">A ^= 2;</td>
</tr>
<tr>
<td class="label"><a name="44450"></a>ADA2</td>
<td class="instruction">CP $02</td>
<td class="comment" rowspan="4">if (A &lt; 2) D -= 2;</td>
</tr>
<tr>
<td class="address"><a name="44452"></a>ADA4</td>
<td class="instruction">JR NC,$ADA8</td>
</tr>
<tr>
<td class="address"><a name="44454"></a>ADA6</td>
<td class="instruction">DEC D</td>
</tr>
<tr>
<td class="address"><a name="44455"></a>ADA7</td>
<td class="instruction">DEC D</td>
</tr>
<tr>
<td class="label"><a name="44456"></a>ADA8</td>
<td class="instruction">INC D</td>
<td class="comment">D++;</td>
</tr>
<tr>
<td class="address"><a name="44457"></a>ADA9</td>
<td class="instruction">AND A</td>
<td class="comment" rowspan="9">if (A != 0 &amp;&amp; A != 3) { E += 2; } else { E -= 2 };</td>
</tr>
<tr>
<td class="address"><a name="44458"></a>ADAA</td>
<td class="instruction">JR Z,$ADB4</td>
</tr>
<tr>
<td class="address"><a name="44460"></a>ADAC</td>
<td class="instruction">CP $03</td>
</tr>
<tr>
<td class="address"><a name="44462"></a>ADAE</td>
<td class="instruction">JR Z,$ADB4</td>
</tr>
<tr>
<td class="address"><a name="44464"></a>ADB0</td>
<td class="instruction">INC E</td>
</tr>
<tr>
<td class="address"><a name="44465"></a>ADB1</td>
<td class="instruction">INC E</td>
</tr>
<tr>
<td class="address"><a name="44466"></a>ADB2</td>
<td class="instruction">JR $ADB6</td>
</tr>
<tr>
<td class="label"><a name="44468"></a>ADB4</td>
<td class="instruction">DEC E</td>
</tr>
<tr>
<td class="address"><a name="44469"></a>ADB5</td>
<td class="instruction">DEC E</td>
</tr>
<tr>
<td class="label"><a name="44470"></a>ADB6</td>
<td class="instruction">DEC HL</td>
<td class="comment" rowspan="3">HL -= 3;</td>
</tr>
<tr>
<td class="address"><a name="44471"></a>ADB7</td>
<td class="instruction">DEC HL</td>
</tr>
<tr>
<td class="address"><a name="44472"></a>ADB8</td>
<td class="instruction">DEC HL</td>
</tr>
<tr>
<td class="address"><a name="44473"></a>ADB9</td>
<td class="instruction">LD (HL),D</td>
<td class="comment" rowspan="2">*HL-- = D;</td>
</tr>
<tr>
<td class="address"><a name="44474"></a>ADBA</td>
<td class="instruction">DEC HL</td>
</tr>
<tr>
<td class="address"><a name="44475"></a>ADBB</td>
<td class="instruction">LD (HL),E</td>
<td class="comment">*HL = E;</td>
</tr>
<tr>
<td class="address"><a name="44476"></a>ADBC</td>
<td class="instruction">RET</td>
<td class="comment">return;</td>
</tr>
</table>
<table class="prevNext">
<tr>
<td class="prev">Prev: <a class="link" href="44329.html">AD29</a></td>
<td class="up">Up: <a class="link" href="../maps/all.html#44377">Map</a></td>
<td class="next">Next: <a class="link" href="44477.html">ADBD</a></td>
</tr>
</table>
<div class="footer">
<div class="release">The incomplete The Great Escape disassembly 20130101</div>
<div class="copyright">&copy; Denton Designs. Ocean. David Thomas.</div>
<div class="created">Created using <a class="link" href="http://pyskool.ca/?page_id=177">SkoolKit</a> 3.3.</div>
</div>
</body>
</html>