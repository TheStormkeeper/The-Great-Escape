<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>The Great Escape: Routine at 6939</title>
<link rel="stylesheet" type="text/css" href="../TheGreatEscape.css" />
</head>
<body class="disassembly">
<table class="header">
<tr>
<td class="headerLogo"><a class="link" href="../index.html"><img src="../images/logo.png" alt="The Great Escape" /></a></td>
<td class="headerText">Routines</td>
</tr>
</table>
<table class="prevNext">
<tr>
<td class="prev">Prev: <a class="link" href="26912.html">6920</a></td>
<td class="up">Up: <a class="link" href="../maps/all.html#26937">Map</a></td>
<td class="next">Next: <a class="link" href="27040.html">69A0</a></td>
</tr>
</table>
<div class="description">6939: setup_movable_items</div>
<table class="disassembly">
<tr>
<td class="routineComment" colspan="3">
<div class="details">
<div class="paragraph">
Used by the routines at <a class="link" href="26786.html">68A2</a> and <a class="link" href="45820.html">B2FC</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="label"><a name="26937"></a>6939</td>
<td class="instruction">CALL <a class="link" href="27081.html">$69C9</a></td>
<td class="comment">reset_all_objects();</td>
</tr>
<tr>
<td class="address"><a name="26940"></a>693C</td>
<td class="instruction">LD A,($68A0)</td>
<td class="comment">A = indoor_room_index;</td>
</tr>
<tr>
<td class="address"><a name="26943"></a>693F</td>
<td class="instruction">CP $02</td>
<td class="comment" rowspan="4">if (A == room_2_hut2left) setup_stove1();</td>
</tr>
<tr>
<td class="address"><a name="26945"></a>6941</td>
<td class="instruction">JP NZ,$6949</td>
</tr>
<tr>
<td class="address"><a name="26948"></a>6944</td>
<td class="instruction">CALL $6978</td>
</tr>
<tr>
<td class="address"><a name="26951"></a>6947</td>
<td class="instruction">JR $695B</td>
</tr>
<tr>
<td class="label"><a name="26953"></a>6949</td>
<td class="instruction">CP $04</td>
<td class="comment" rowspan="4">else if (A == room_4_hut3left) setup_stove2();</td>
</tr>
<tr>
<td class="address"><a name="26955"></a>694B</td>
<td class="instruction">JP NZ,$6953</td>
</tr>
<tr>
<td class="address"><a name="26958"></a>694E</td>
<td class="instruction">CALL $6971</td>
</tr>
<tr>
<td class="address"><a name="26961"></a>6951</td>
<td class="instruction">JR $695B</td>
</tr>
<tr>
<td class="label"><a name="26963"></a>6953</td>
<td class="instruction">CP $09</td>
<td class="comment" rowspan="3">else if (A == room_9_crate)    setup_crate();</td>
</tr>
<tr>
<td class="address"><a name="26965"></a>6955</td>
<td class="instruction">JP NZ,$695B</td>
</tr>
<tr>
<td class="address"><a name="26968"></a>6958</td>
<td class="instruction">CALL $696A</td>
</tr>
<tr>
<td class="label"><a name="26971"></a>695B</td>
<td class="instruction">CALL <a class="link" href="50204.html">$C41C</a></td>
<td class="comment">called_from_main_loop_7();</td>
</tr>
<tr>
<td class="address"><a name="26974"></a>695E</td>
<td class="instruction">CALL <a class="link" href="56222.html">$DB9E</a></td>
<td class="comment">called_from_main_loop_8();</td>
</tr>
<tr>
<td class="address"><a name="26977"></a>6961</td>
<td class="instruction">CALL <a class="link" href="46542.html">$B5CE</a></td>
<td class="comment">called_from_main_loop_9();</td>
</tr>
<tr>
<td class="address"><a name="26980"></a>6964</td>
<td class="instruction">CALL <a class="link" href="43698.html">$AAB2</a></td>
<td class="comment">called_from_main_loop_10();</td>
</tr>
<tr>
<td class="address"><a name="26983"></a>6967</td>
<td class="instruction">JP <a class="link" href="47206.html">$B866</a></td>
<td class="comment">called_from_main_loop_11();</td>
</tr>
<tr>
<td class="label"><a name="26986"></a>696A</td>
<td class="instruction">LD HL,$69B7</td>
<td class="comment">setup_crate: HL = &amp;crate;</td>
</tr>
<tr>
<td class="address"><a name="26989"></a>696D</td>
<td class="instruction">LD A,$1C</td>
<td class="comment">A = character_28_crate;</td>
</tr>
<tr>
<td class="address"><a name="26991"></a>696F</td>
<td class="instruction">JR $697D</td>
<td class="comment">goto setup_movable_items;</td>
</tr>
<tr>
<td class="label"><a name="26993"></a>6971</td>
<td class="instruction">LD HL,$69C0</td>
<td class="comment">setup_stove2: HL = &amp;stove2;</td>
</tr>
<tr>
<td class="address"><a name="26996"></a>6974</td>
<td class="instruction">LD A,$1B</td>
<td class="comment">A = character_27_stove2;</td>
</tr>
<tr>
<td class="address"><a name="26998"></a>6976</td>
<td class="instruction">JR $697D</td>
<td class="comment">goto setup_movable_items;</td>
</tr>
<tr>
<td class="label"><a name="27000"></a>6978</td>
<td class="instruction">LD HL,$69AE</td>
<td class="comment">setup_stove1: HL = &amp;stove1;</td>
</tr>
<tr>
<td class="address"><a name="27003"></a>697B</td>
<td class="instruction">LD A,$1A</td>
<td class="comment">A = character_26_stove1; // then fallthrough to...</td>
</tr>
<tr>
<td class="label"><a name="27005"></a>697D</td>
<td class="instruction">LD ($8020),A</td>
<td class="comment">setup_movable_items: $8020 = A; // character index</td>
</tr>
<tr>
<td class="address"><a name="27008"></a>6980</td>
<td class="instruction">LD BC,$0009</td>
<td class="comment" rowspan="3">memcpy($802F, HL, 9); // character 0 is $8020..$803F</td>
</tr>
<tr>
<td class="address"><a name="27011"></a>6983</td>
<td class="instruction">LD DE,$802F</td>
</tr>
<tr>
<td class="address"><a name="27014"></a>6986</td>
<td class="instruction">LDIR</td>
</tr>
<tr>
<td class="address"><a name="27016"></a>6988</td>
<td class="instruction">LD HL,$69A0</td>
<td class="comment" rowspan="4">memcpy($8021, byte_69A0, 14);</td>
</tr>
<tr>
<td class="address"><a name="27019"></a>698B</td>
<td class="instruction">LD DE,$8021</td>
</tr>
<tr>
<td class="address"><a name="27022"></a>698E</td>
<td class="instruction">LD BC,$000E</td>
</tr>
<tr>
<td class="address"><a name="27025"></a>6991</td>
<td class="instruction">LDIR</td>
</tr>
<tr>
<td class="address"><a name="27027"></a>6993</td>
<td class="instruction">LD A,($68A0)</td>
<td class="comment" rowspan="2">$803C = indoor_room_index;</td>
</tr>
<tr>
<td class="address"><a name="27030"></a>6996</td>
<td class="instruction">LD ($803C),A</td>
</tr>
<tr>
<td class="address"><a name="27033"></a>6999</td>
<td class="instruction">LD HL,$8020</td>
<td class="comment">HL = $8020;</td>
</tr>
<tr>
<td class="address"><a name="27036"></a>699C</td>
<td class="instruction">CALL <a class="link" href="46875.html">$B71B</a></td>
<td class="comment">reset_something();</td>
</tr>
<tr>
<td class="address"><a name="27039"></a>699F</td>
<td class="instruction">RET</td>
<td class="comment">return;</td>
</tr>
</table>
<table class="prevNext">
<tr>
<td class="prev">Prev: <a class="link" href="26912.html">6920</a></td>
<td class="up">Up: <a class="link" href="../maps/all.html#26937">Map</a></td>
<td class="next">Next: <a class="link" href="27040.html">69A0</a></td>
</tr>
</table>
<div class="footer">
<div class="release">The incomplete The Great Escape disassembly 20130101</div>
<div class="copyright">&copy; Denton Designs. Ocean. David Thomas.</div>
<div class="created">Created using <a class="link" href="http://pyskool.ca/?page_id=177">SkoolKit</a> 3.3.</div>
</div>
</body>
</html>